<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Day04 Îã®Ïñ¥Ïû• ÌÄ¥Ï¶à</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 1000px; margin: auto; }
    h1, h2 { text-align: center; }
    #container { display: flex; gap: 20px; }
    #sidebar { width: 30%; border-right: 1px solid #ccc; padding-right: 10px; }
    #app { width: 70%; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    button { padding: 8px 16px; margin: 4px; cursor: pointer; }
    .btn-start, .btn-retry, .btn-restart, .btn-show { background: #007bff; color: white; border: none; }
    .btn-submit      { background: #28a745; color: white; border: none; }
    .btn-retry       { background: #ffc107; color: #212529; }
    .btn-restart     { background: #17a2b8; }
    input[type="text"] { width: 100%; padding: 8px; margin-bottom: 10px; box-sizing: border-box; font-size: 16px;}
    #scoreboard { font-weight: bold; margin-bottom: 10px; }
    #history { list-style: none; padding-left: 0; max-height: 300px; overflow-y: auto; }
    #history li { margin-bottom: 4px; }
    #vocabModal { display: none; position: fixed; top: 10%; left: 50%; transform: translateX(-50%); width: 80%; max-height: 80%; overflow-y: auto; background: white; border: 1px solid #ccc; padding: 16px; z-index: 1000; }
    #vocabModal table { margin-bottom: 0; }
    #modalClose { float: right; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Day04 Îã®Ïñ¥Ïû• ÌÄ¥Ï¶à</h1>
  <div id="container">
    <div id="sidebar">
      <div id="scoreboard">ÎßûÏùå: 0, ÌãÄÎ¶º: 0</div>
      <ul id="history"></ul>
    </div>
    <div id="app"></div>
  </div>

  <!-- Vocab Modal -->
  <div id="vocabModal">
    <span id="modalClose">‚úñÔ∏è</span>
    <h2>Îã®Ïñ¥Ïû•</h2>
    <table>
      <thead><tr><th>ÌïúÍµ≠Ïñ¥</th><th>English</th></tr></thead>
      <tbody>
        <!-- Rows inserted dynamically -->
      </tbody>
    </table>
  </div>

  <script>
    const vocabList = [
  { korean: "ÏßÑÎ£å", english: "Medical Care" },
  { korean: "ÎåÄÍ∏∞Ïã§ÏóêÏÑú", english: "In the Waiting Room" },
  { korean: "ÏïΩÏÜç", english: "an appointment" },
  { korean: "Ï†ëÏàòÏõê", english: "a receptionist" },
  { korean: "ÏùòÎ£å Î≥¥Ìóò Ïπ¥Îìú", english: "a health insurance card" },
  { korean: "Î≥ëÎ†• Í∏∞Î°ù ÏñëÏãù", english: "a health history form" },
  { korean: "Í≤ÄÏÇ¨Ïã§ÏóêÏÑú", english: "In the Examining Room" },
  { korean: "ÏùòÏÇ¨", english: "a doctor" },
  { korean: "ÌôòÏûê", english: "a patient" },
  { korean: "ÏßÑÎ£åÎåÄ", english: "an examination table" },
  { korean: "Í∞ÑÌò∏ÏÇ¨", english: "a nurse" },
  { korean: "ÌòàÏïïÍ≥Ñ", english: "a blood pressure gauge" },
  { korean: "Ï≤≠ÏßÑÍ∏∞", english: "a stethoscope" },
  { korean: "Ï≤¥Ïò®Í≥Ñ", english: "a thermometer" },
  { korean: "Ï£ºÏÇ¨", english: "a syringe" },
  { korean: "ÏßÑÎ£å Ï†àÏ∞®", english: "Medical Procedures" },
  { korean: "ÌòàÏïïÏùÑ Ïû¨Îã§", english: "check s/o's blood pressure" },
  { korean: "Ï≤¥Ïò®ÏùÑ Ïû¨Îã§", english: "take s/o's temperature" },
  { korean: "Ïã¨Ïû• Î∞ïÎèôÏùÑ Îì£Îã§", english: "listen to s/o's heart" },
  { korean: "ÎààÏùÑ Í≤ÄÏÇ¨ÌïòÎã§", english: "examine s/o's eyes" },
  { korean: "Î™©ÏùÑ Í≤ÄÏÇ¨ÌïòÎã§", english: "examine s/o's throat" },
  { korean: "ÌîºÎ•º ÎΩëÎã§", english: "draw s/o's blood" },
  { korean: "ÏπòÍ≥º ÏßÑÎ£å", english: "Dental Care" },
  { korean: "ÏπòÍ≥º", english: "Dentistry" },
  { korean: "ÏπòÍ≥ºÏùòÏÇ¨", english: "a dentist" },
  { korean: "ÏπòÍ≥º Î≥¥Ï°∞Ïõê", english: "a dental assistant" },
  { korean: "Íµ¨Í∞ï ÏúÑÏÉùÏÇ¨", english: "a dental hygienist" },
  { korean: "ÏπòÍ≥º Ïû•ÎπÑ", english: "dental instruments" },
  { korean: "ÍµêÏ†ïÍ≥º", english: "Orthodontics" },
  { korean: "ÍµêÏ†ïÏπòÍ≥ºÏùò", english: "an orthodontist" },
  { korean: "ÍµêÏ†ïÍ∏∞", english: "braces" },
  { korean: "Ìà¨Î™Ö ÍµêÏ†ïÍ∏∞", english: "a clear aligner" },
  { korean: "ÏπòÍ≥º ÏßàÌôò", english: "Dental Problems" },
  { korean: "Ï∂©Ïπò", english: "a cavity / decay" },
  { korean: "Ï∂©Ï†ÑÏû¨", english: "a filling" },
  { korean: "Ïù∏Í≥µ ÏπòÍ¥Ä", english: "a crown" },
  { korean: "ÌãÄÎãà", english: "dentures" },
  { korean: "ÏûáÎ™∏ÏßàÌôò", english: "gum disease" },
  { korean: "ÏπòÏÑù", english: "plaque" },
  { korean: "ÏßÑÎ£åÏã§ÏóêÏÑú", english: "An Office Visit" },
  { korean: "ÏπòÏïÑÎ•º Îã¶Îã§", english: "clean the teeth" },
  { korean: "XÏÑ† Ï¥¨ÏòÅÏùÑ ÌïòÎã§", english: "take X-rays" },
  { korean: "Íµ¨Í∞ïÏùÑ ÎßàÏ∑®ÌïòÎã§", english: "numb the mouth" },
  { korean: "Ïù¥Î•º ÎìúÎ¶¥ÌïòÎã§", english: "drill a tooth" },
  { korean: "Ï∂©ÏπòÎ•º Î©îÏö∞Îã§", english: "fill a cavity" },
  { korean: "Ïù¥Î•º ÎΩëÎã§", english: "pull a tooth" },
  { korean: "ÌäπÎ≥Ñ ÌñâÏÇ¨Î•º ÌïòÎã§", english: "have a special promotion" },
  { korean: "#Í∞ú ÏÇ¨Î©¥ #Í∞ú Î¨¥Î£å", english: "buy # get # free" },
  { korean: "ÍµøÏ¶à", english: "merch" },
  { korean: "ÎíπÍµ¥Í±∞Î¶¨Îã§", english: "lounge around" },
  { korean: "ÏÑ∏Ìä∏", english: "a combo" },
  { korean: "ÎåÄÌëúÏùò", english: "signature" },
  { korean: "ÌõÖ Îπ†ÏßÄÎã§", english: "hooked" },
  { korean: "Ïù¥ÏûêÍπåÏßÄ Ìï¥ÏÑú", english: "with interest" },
  { korean: "ÏÑ±ÌòïÌïòÎã§", english: "get work done" },
  { korean: "Ïû¨Í≥†Í∞Ä ÏûàÎäî ÎèôÏïà", english: "while supplies last" },
  { korean: "Ïù¥ÎßåÌïú Í∞ÄÏπòÍ∞Ä ÏóÜÍ∏∞Îßå Ìï¥Î¥ê", english: "This better be worth it." },
  { korean: "ÍπúÎπ°ÌñàÎÇòÎ¥ê", english: "It must've slipped my mind." },
  { korean: "ÎøåÎ¶∞ ÎåÄÎ°ú Í±∞ÎëêÎã§", english: "What goes around comes around." }
];


    let stage = 'initial';
    let quizList = [...vocabList];
    let currentIndex = 0;
    let history = [];
    let correctCount = 0;
    let wrongCount = 0;

    function renderSidebar() {
      document.getElementById('scoreboard').textContent = `ÎßûÏùå: ${correctCount}, ÌãÄÎ¶º: ${wrongCount}`;
      const historyEl = document.getElementById('history');
      historyEl.innerHTML = '';
      history.slice(-5).forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.korean}: ${item.isCorrect ? '‚úÖ' : '‚ùå'} ${item.english}`;
        historyEl.appendChild(li);
      });
    }

    function render() {
      renderSidebar();
      const app = document.getElementById('app');
      app.innerHTML = '';

      if (stage === 'initial') {
        const startBtn = document.createElement('button');
        startBtn.textContent = 'Start Quiz';
        startBtn.className = 'btn-start';
        startBtn.addEventListener('click', () => { stage = 'quiz'; render(); });
        app.appendChild(startBtn);

        const table = document.createElement('table');
        const thead = document.createElement('thead');
        thead.innerHTML = '<tr><th>ÌïúÍµ≠Ïñ¥</th><th>English</th></tr>';
        table.appendChild(thead);
        const tbody = document.createElement('tbody');
        vocabList.forEach(item => {
          const tr = document.createElement('tr');
          tr.innerHTML = `<td>${item.korean}</td><td>${item.english}</td>`;
          tbody.appendChild(tr);
        });
        table.appendChild(tbody);
        app.appendChild(table);
      }

      if (stage === 'quiz') {
        // Show vocab toggle button
        const showBtn = document.createElement('button');
        showBtn.textContent = 'View Vocabulary';
        showBtn.className = 'btn-show';
        showBtn.addEventListener('click', toggleVocabModal);
        app.appendChild(showBtn);

        const current = quizList[currentIndex];
        const qDiv = document.createElement('div');
        qDiv.innerHTML = `<strong>Q${currentIndex + 1}.</strong> ${current.korean}`;
        app.appendChild(qDiv);

        const input = document.createElement('input');
        input.type = 'text';
        input.id = 'answer';
        app.appendChild(input);
        input.focus();

        const btn = document.createElement('button');
        btn.textContent = 'Submit';
        btn.className = 'btn-submit';
        btn.addEventListener('click', submitAnswer);
        app.appendChild(btn);

        input.addEventListener('keydown', e => {
          if (e.key === 'Enter') { e.preventDefault(); submitAnswer(); }
        });
      }

      if (stage === 'results') {
        const retryBtn = document.createElement('button');
        retryBtn.textContent = 'Retry Wrong Words';
        retryBtn.className = 'btn-retry';
        retryBtn.addEventListener('click', retryWrong);
        app.appendChild(retryBtn);

        const restartBtn = document.createElement('button');
        restartBtn.textContent = 'Restart Full Quiz';
        restartBtn.className = 'btn-restart';
        restartBtn.addEventListener('click', restartQuiz);
        app.appendChild(restartBtn);

        const h2 = document.createElement('h2');
        h2.textContent = 'Quiz Finished!';
        app.appendChild(h2);

        if (wrongCount > 0) {
          const p = document.createElement('p');
          p.textContent = `You got ${wrongCount} wrong:`;
          app.appendChild(p);

          const table = document.createElement('table');
          const thead = document.createElement('thead');
          thead.innerHTML = '<tr><th>ÌïúÍµ≠Ïñ¥</th><th>English</th></tr>';
          table.appendChild(thead);
          const tbody = document.createElement('tbody');
          history.filter(item => !item.isCorrect).forEach(item => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${item.korean}</td><td>${item.english}</td>`;
            tbody.appendChild(tr);
          });
          table.appendChild(tbody);
          app.appendChild(table);
        } else {
          const p = document.createElement('p');
          p.textContent = 'Perfect score! üéâ';
          app.appendChild(p);
        }
      }
    }

    function submitAnswer() {
      const current = quizList[currentIndex];
      const answer = document.getElementById('answer').value.trim().toLowerCase();
      const correct = current.english.trim().toLowerCase();
      const isCorrect = (answer === correct);
      history.push({ korean: current.korean, english: current.english, isCorrect });
      isCorrect ? correctCount++ : wrongCount++;
      document.getElementById('answer').value = '';
      if (currentIndex + 1 < quizList.length) {
        currentIndex++; render();
      } else {
        stage = 'results'; render();
      }
    }

    function retryWrong() {
      quizList = history.filter(item => !item.isCorrect).map(item => ({ korean: item.korean, english: item.english }));
      resetQuiz(); stage = 'quiz'; render();
    }

    function restartQuiz() {
      quizList = [...vocabList]; resetQuiz(); stage = 'quiz'; render();
    }

    function resetQuiz() {
      history = []; correctCount = 0; wrongCount = 0; currentIndex = 0;
    }

    // Vocab modal functions
    function toggleVocabModal() {
      const modal = document.getElementById('vocabModal');
      modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
    }
    document.getElementById('modalClose').addEventListener('click', toggleVocabModal);

    // Populate vocab modal on load
    document.addEventListener('DOMContentLoaded', () => {
      const tbody = document.querySelector('#vocabModal tbody');
      vocabList.forEach(item => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${item.korean}</td><td>${item.english}</td>`;
        tbody.appendChild(tr);
      });
      render();
    });
  </script>
</body>
</html>
