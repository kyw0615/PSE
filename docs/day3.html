<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Day03 Îã®Ïñ¥Ïû• ÌÄ¥Ï¶à</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 1000px; margin: auto; }
    h1, h2 { text-align: center; }
    #container { display: flex; gap: 20px; }
    #sidebar { width: 30%; border-right: 1px solid #ccc; padding-right: 10px; }
    #app { width: 70%; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    button { padding: 8px 16px; margin: 4px; cursor: pointer; }
    .btn-start, .btn-retry, .btn-restart, .btn-show { background: #007bff; color: white; border: none; }
    .btn-submit      { background: #28a745; color: white; border: none; }
    .btn-retry       { background: #ffc107; color: #212529; }
    .btn-restart     { background: #17a2b8; }
    input[type="text"] { width: 100%; padding: 8px; margin-bottom: 10px; box-sizing: border-box; font-size: 16px;}
    #scoreboard { font-weight: bold; margin-bottom: 10px; }
    #history { list-style: none; padding-left: 0; max-height: 300px; overflow-y: auto; }
    #history li { margin-bottom: 4px; }
    #vocabModal { display: none; position: fixed; top: 10%; left: 50%; transform: translateX(-50%); width: 80%; max-height: 80%; overflow-y: auto; background: white; border: 1px solid #ccc; padding: 16px; z-index: 1000; }
    #vocabModal table { margin-bottom: 0; }
    #modalClose { float: right; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Day03 Îã®Ïñ¥Ïû• ÌÄ¥Ï¶à</h1>
  <div id="container">
    <div id="sidebar">
      <div id="scoreboard">ÎßûÏùå: 0, ÌãÄÎ¶º: 0</div>
      <ul id="history"></ul>
    </div>
    <div id="app"></div>
  </div>

  <!-- Vocab Modal -->
  <div id="vocabModal">
    <span id="modalClose">‚úñÔ∏è</span>
    <h2>Îã®Ïñ¥Ïû•</h2>
    <table>
      <thead><tr><th>ÌïúÍµ≠Ïñ¥</th><th>English</th></tr></thead>
      <tbody>
        <!-- Rows inserted dynamically -->
      </tbody>
    </table>
  </div>

  <script>
    const vocabList = [
  { korean: "Ïò∑ ÏàòÏÑ†", english: "Making Alterations" },
  { korean: "Ïò∑ ÏàòÏÑ†Ï†ê", english: "An Alterations Shop" },
  { korean: "ÏñëÏû¨ÏÇ¨", english: "a dressmaker" },
  { korean: "ÏñëÏû¨Ïö© ÎßàÎÑ§ÌÇπ", english: "a dressmaker's dummy" },
  { korean: "Ïû¨Î¥âÏÇ¨", english: "a tailor" },
  { korean: "ÏπºÎùº", english: "a collar" },
  { korean: "ÌóàÎ¶¨Îù†", english: "a waistband" },
  { korean: "ÏÜåÎß§", english: "a sleeve" },
  { korean: "Ï£ºÎ®∏Îãà", english: "a pocket" },
  { korean: "Î∞ëÎã®", english: "a hem" },
  { korean: "ÏïÑÎû´Îã®", english: "a cuff" },
  { korean: "Î∞îÎäêÏßà Ïö©Ìíà", english: "Sewing Supplies" },
  { korean: "Î∞îÎäò", english: "a needle" },
  { korean: "Ïã§", english: "thread" },
  { korean: "ÏãúÏπ®ÌïÄ", english: "a (straight) pin" },
  { korean: "Î∞îÎäòÍΩÇÏù¥", english: "a pincushion" },
  { korean: "Ïò∑ÌïÄ", english: "a safety pin" },
  { korean: "Í≥®Î¨¥", english: "a thimble" },
  { korean: "Í∞ÄÏúÑ", english: "a pair of scissors" },
  { korean: "Ï§ÑÏûê", english: "a tape measure" },
  { korean: "ÏÜîÍ∏∞ Ìä∏Îäî Í∏∞Íµ¨", english: "a seam ripper" },
  { korean: "ÏàòÏÑ†", english: "Alterations" },
  { korean: "Î∞îÏßÄ Í∏∏Ïù¥Î•º ÎäòÎ¶¨Îã§", english: "to lengthen the pants" },
  { korean: "Î∞îÏßÄ Í∏∏Ïù¥Î•º Ï§ÑÏù¥Îã§", english: "to shorten the pants" },
  { korean: "Î∞îÏßÄ ÌíàÏùÑ ÎäòÎ¶¨Îã§", english: "to let out the pants" },
  { korean: "Î∞îÏßÄ ÌíàÏùÑ Ï§ÑÏù¥Îã§", english: "to take in the pants" },
  { korean: "Ïû¨ÌÉùÍ∑ºÎ¨¥ÌïòÎã§", english: "to work remotely" },
  { korean: "ÏûêÏó∞Ïû¨Ìï¥", english: "a natural disaster" },
  { korean: "s/tÏùÑ ÏãúÏûëÌïòÎã§ (Ï∑®ÎØ∏Î°ú)", english: "to take up s/t" },
  { korean: "ÏòÅÌïò", english: "below freezing" },
  { korean: "ÎÇòÌÉÄÎÇòÎã§", english: "to show up" },
  { korean: "ÏåìÏù¥Îã§", english: "to pile up" },
  { korean: "Ïù¥ÏÑ±ÏùÑ ÏûÉÎã§", english: "to lose it" },
  { korean: "Í∏∞Î∂ÑÏù¥ Ï¢ãÎã§", english: "to be in a good mood" },
  { korean: "(Í±∏Ïñ¥ÏÑú) ÎèåÏïÑÎã§ÎãàÎã§", english: "to walk around" },
  { korean: "ÎØ∏ÏÑ∏ Î®ºÏßÄ", english: "the fine dust" },
  { korean: "ÎØºÏ¶ù Í≤ÄÏÇ¨ÌïòÎã§", english: "to card" },
  { korean: "ÌôîÏû•Ïã§ Ïπ∏", english: "a stall" }
];


    let stage = 'initial';
    let quizList = [...vocabList];
    let currentIndex = 0;
    let history = [];
    let correctCount = 0;
    let wrongCount = 0;

    function renderSidebar() {
      document.getElementById('scoreboard').textContent = `ÎßûÏùå: ${correctCount}, ÌãÄÎ¶º: ${wrongCount}`;
      const historyEl = document.getElementById('history');
      historyEl.innerHTML = '';
      history.slice(-5).forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.korean}: ${item.isCorrect ? '‚úÖ' : '‚ùå'} ${item.english}`;
        historyEl.appendChild(li);
      });
    }

    function render() {
      renderSidebar();
      const app = document.getElementById('app');
      app.innerHTML = '';

      if (stage === 'initial') {
        const startBtn = document.createElement('button');
        startBtn.textContent = 'Start Quiz';
        startBtn.className = 'btn-start';
        startBtn.addEventListener('click', () => { stage = 'quiz'; render(); });
        app.appendChild(startBtn);

        const table = document.createElement('table');
        const thead = document.createElement('thead');
        thead.innerHTML = '<tr><th>ÌïúÍµ≠Ïñ¥</th><th>English</th></tr>';
        table.appendChild(thead);
        const tbody = document.createElement('tbody');
        vocabList.forEach(item => {
          const tr = document.createElement('tr');
          tr.innerHTML = `<td>${item.korean}</td><td>${item.english}</td>`;
          tbody.appendChild(tr);
        });
        table.appendChild(tbody);
        app.appendChild(table);
      }

      if (stage === 'quiz') {
        // Show vocab toggle button
        const showBtn = document.createElement('button');
        showBtn.textContent = 'View Vocabulary';
        showBtn.className = 'btn-show';
        showBtn.addEventListener('click', toggleVocabModal);
        app.appendChild(showBtn);

        const current = quizList[currentIndex];
        const qDiv = document.createElement('div');
        qDiv.innerHTML = `<strong>Q${currentIndex + 1}.</strong> ${current.korean}`;
        app.appendChild(qDiv);

        const input = document.createElement('input');
        input.type = 'text';
        input.id = 'answer';
        app.appendChild(input);
        input.focus();

        const btn = document.createElement('button');
        btn.textContent = 'Submit';
        btn.className = 'btn-submit';
        btn.addEventListener('click', submitAnswer);
        app.appendChild(btn);

        input.addEventListener('keydown', e => {
          if (e.key === 'Enter') { e.preventDefault(); submitAnswer(); }
        });
      }

      if (stage === 'results') {
        const retryBtn = document.createElement('button');
        retryBtn.textContent = 'Retry Wrong Words';
        retryBtn.className = 'btn-retry';
        retryBtn.addEventListener('click', retryWrong);
        app.appendChild(retryBtn);

        const restartBtn = document.createElement('button');
        restartBtn.textContent = 'Restart Full Quiz';
        restartBtn.className = 'btn-restart';
        restartBtn.addEventListener('click', restartQuiz);
        app.appendChild(restartBtn);

        const h2 = document.createElement('h2');
        h2.textContent = 'Quiz Finished!';
        app.appendChild(h2);

        if (wrongCount > 0) {
          const p = document.createElement('p');
          p.textContent = `You got ${wrongCount} wrong:`;
          app.appendChild(p);

          const table = document.createElement('table');
          const thead = document.createElement('thead');
          thead.innerHTML = '<tr><th>ÌïúÍµ≠Ïñ¥</th><th>English</th></tr>';
          table.appendChild(thead);
          const tbody = document.createElement('tbody');
          history.filter(item => !item.isCorrect).forEach(item => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${item.korean}</td><td>${item.english}</td>`;
            tbody.appendChild(tr);
          });
          table.appendChild(tbody);
          app.appendChild(table);
        } else {
          const p = document.createElement('p');
          p.textContent = 'Perfect score! üéâ';
          app.appendChild(p);
        }
      }
    }

    function submitAnswer() {
      const current = quizList[currentIndex];
      const answer = document.getElementById('answer').value.trim().toLowerCase();
      const correct = current.english.trim().toLowerCase();
      const isCorrect = (answer === correct);
      history.push({ korean: current.korean, english: current.english, isCorrect });
      isCorrect ? correctCount++ : wrongCount++;
      document.getElementById('answer').value = '';
      if (currentIndex + 1 < quizList.length) {
        currentIndex++; render();
      } else {
        stage = 'results'; render();
      }
    }

    function retryWrong() {
      quizList = history.filter(item => !item.isCorrect).map(item => ({ korean: item.korean, english: item.english }));
      resetQuiz(); stage = 'quiz'; render();
    }

    function restartQuiz() {
      quizList = [...vocabList]; resetQuiz(); stage = 'quiz'; render();
    }

    function resetQuiz() {
      history = []; correctCount = 0; wrongCount = 0; currentIndex = 0;
    }

    // Vocab modal functions
    function toggleVocabModal() {
      const modal = document.getElementById('vocabModal');
      modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
    }
    document.getElementById('modalClose').addEventListener('click', toggleVocabModal);

    // Populate vocab modal on load
    document.addEventListener('DOMContentLoaded', () => {
      const tbody = document.querySelector('#vocabModal tbody');
      vocabList.forEach(item => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${item.korean}</td><td>${item.english}</td>`;
        tbody.appendChild(tr);
      });
      render();
    });
  </script>
</body>
</html>
