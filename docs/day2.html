<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Day02 Îã®Ïñ¥Ïû• ÌÄ¥Ï¶à</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 1000px; margin: auto; }
    h1, h2 { text-align: center; }
    #container { display: flex; gap: 20px; }
    #sidebar { width: 30%; border-right: 1px solid #ccc; padding-right: 10px; }
    #app { width: 70%; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    button { padding: 8px 16px; margin: 4px; cursor: pointer; }
    .btn-start, .btn-retry, .btn-restart, .btn-show { background: #007bff; color: white; border: none; }
    .btn-submit      { background: #28a745; color: white; border: none; }
    .btn-retry       { background: #ffc107; color: #212529; }
    .btn-restart     { background: #17a2b8; }
    input[type="text"] { width: 100%; padding: 8px; margin-bottom: 10px; box-sizing: border-box; font-size: 16px;}
    #scoreboard { font-weight: bold; margin-bottom: 10px; }
    #history { list-style: none; padding-left: 0; max-height: 300px; overflow-y: auto; }
    #history li { margin-bottom: 4px; }
    #vocabModal { display: none; position: fixed; top: 10%; left: 50%; transform: translateX(-50%); width: 80%; max-height: 80%; overflow-y: auto; background: white; border: 1px solid #ccc; padding: 16px; z-index: 1000; }
    #vocabModal table { margin-bottom: 0; }
    #modalClose { float: right; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Day02 Îã®Ïñ¥Ïû• ÌÄ¥Ï¶à</h1>
  <div id="container">
    <div id="sidebar">
      <div id="scoreboard">ÎßûÏùå: 0, ÌãÄÎ¶º: 0</div>
      <ul id="history"></ul>
    </div>
    <div id="app"></div>
  </div>

  <!-- Vocab Modal -->
  <div id="vocabModal">
    <span id="modalClose">‚úñÔ∏è</span>
    <h2>Îã®Ïñ¥Ïû•</h2>
    <table>
      <thead><tr><th>ÌïúÍµ≠Ïñ¥</th><th>English</th></tr></thead>
      <tbody>
        <!-- Rows inserted dynamically -->
      </tbody>
    </table>
  </div>

  <script>
    const vocabList = [
  { korean: 'ÏùòÎ≥µ Î¨òÏÇ¨', english: 'Describing clothes' },
  { korean: 'ÏÇ¨Ïù¥Ï¶à', english: 'Sizes' },

  { korean: 'ÌäπÏÜå', english: 'extra small' },
  { korean: 'ÏÜå', english: 'small' },
  { korean: 'Ï§ë', english: 'medium' },
  { korean: 'ÎåÄ', english: 'large' },
  { korean: 'ÌäπÎåÄ', english: 'extra large' },
  { korean: 'ÌîÑÎ¶¨ ÏÇ¨Ïù¥Ï¶à', english: 'one-size-fits-all' },
  { korean: 'Ïä§ÌÉÄÏùº', english: 'Styles' },
  { korean: 'ÌÅ¨Î£®ÎÑ• Ïä§Ïõ®ÌÑ∞', english: 'a crewneck sweater' },
  { korean: 'Î∏åÏù¥ÎÑ• Ïä§Ïõ®ÌÑ∞', english: 'a V-neck sweater' },
  { korean: 'ÌÑ∞ÌãÄÎÑ• Ïä§Ïõ®ÌÑ∞', english: 'a turtleneck sweater' },
  { korean: 'Ïä§Ïø±ÎÑ• Ïä§Ïõ®ÌÑ∞', english: 'a scoop neck sweater' },
  { korean: 'ÎØºÏÜåÎß§ ÏÖîÏ∏†', english: 'a sleeveless shirt' },
  { korean: 'Î∞òÏÜåÎß§ ÏÖîÏ∏†', english: 'a short-sleeved shirt' },
  { korean: '7Î∂Ä ÏÜåÎß§ ÏÖîÏ∏†', english: 'a 3/4-sleeved shirt' },
  { korean: 'Í∏¥ÏÜåÎß§ ÏÖîÏ∏†', english: 'a long-sleeved shirt' },
  { korean: 'ÎØ∏Îãà Ïä§Ïª§Ìä∏', english: 'a miniskirt' },
  { korean: 'ÏßßÏùÄ ÏπòÎßà', english: 'a short skirt' },
  { korean: 'Î¨¥Î¶é Í∏∏Ïù¥ / Î∞úÎ™© Í∏∏Ïù¥ ÏπòÎßà', english: 'a mid-length / a calf-length skirt' },
  { korean: 'Í∏¥ ÏπòÎßà', english: 'a long skirt' },

  { korean: 'Ìå®ÌÑ¥', english: 'Patterns' },
  { korean: 'Îã®ÏÉâ', english: 'solid' },
  { korean: 'Ï§ÑÎ¨¥Îä¨', english: 'striped' },
  { korean: 'Î¨ºÎ∞©Ïö∏ Î¨¥Îä¨', english: 'polka-dotted' },
  { korean: 'Í≤©Ïûê Î¨¥Îä¨', english: 'plaid' },
  { korean: 'ÌîÑÎ¶∞Ìä∏ Î¨¥Îä¨', english: 'print' },
  { korean: 'Ï≤¥ÌÅ¨ Î¨¥Îä¨', english: 'checked' },
  { korean: 'ÍΩÉÎ¨¥Îä¨', english: 'floral' },
  { korean: 'ÌéòÏù¥Ï¶êÎ¶¨ Î¨¥Îä¨', english: 'paisley' },
  { korean: 'Ïà†Î≤ÑÎ¶áÏù¥ Ïïà Ï¢ãÏùÄ ÏÇ¨Îûå, ÏßÑÏÉÅ', english: 'a bad drunk' },
  { korean: 'Ïñ¥Î¶∞Ïù¥ Î≥¥Ìò∏Íµ¨Ïó≠', english: 'a school zone' },
  { korean: 'Î≤åÍ∏àÏù¥ Î∂ÄÍ≥ºÎêòÎã§', english: 'be hit with a fine' },
  { korean: 'ÏóÑÏ≤≠', english: 'extra' },
  { korean: 'Ï§ÄÎπÑ ÏûëÏóÖ, Ï§ÄÎπÑÎ¨º', english: 'prep work' },
  { korean: 'ÌîºÍ≥§Ìïú', english: 'beat' },
  { korean: 'Ìà¨Ïû° Îõ∞Îã§', english: 'moonlight' },
  { korean: 'ÏïºÍ∑ºÌïòÎã§', english: 'work overtime' },
  { korean: 's/tÏùÑ Î∞õÏïÑÏ†ÅÎã§', english: 'write s/t down' },
  { korean: 'Ìö®Ïú®Ï†ÅÏúºÎ°ú', english: 'efficiently' },
  { korean: '(S = ÎÇòÏÅú Í≤ÉÏù¥) Ïù¥Ï†úÏÑú s/oÏóêÍ≤å Ï¶ùÏÉÅÏù¥ ÎÇòÌÉÄÎÇòÎã§', english: 'catch up with s/o' },
  { korean: 'ÏûêÏ±ÖÌïòÎã§', english: 'beat oneself up' },
  { korean: '#Ïù∏Ïäπ', english: '# seater' },
  { korean: 'Ïôú Ï£ºÎàÖ Îì§Ïñ¥ ÏûàÏñ¥?', english: 'Why the long face?' }
];


    let stage = 'initial';
    let quizList = [...vocabList];
    let currentIndex = 0;
    let history = [];
    let correctCount = 0;
    let wrongCount = 0;

    function renderSidebar() {
      document.getElementById('scoreboard').textContent = `ÎßûÏùå: ${correctCount}, ÌãÄÎ¶º: ${wrongCount}`;
      const historyEl = document.getElementById('history');
      historyEl.innerHTML = '';
      history.slice(-5).forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.korean}: ${item.isCorrect ? '‚úÖ' : '‚ùå'} ${item.english}`;
        historyEl.appendChild(li);
      });
    }

    function render() {
      renderSidebar();
      const app = document.getElementById('app');
      app.innerHTML = '';

      if (stage === 'initial') {
        const startBtn = document.createElement('button');
        startBtn.textContent = 'Start Quiz';
        startBtn.className = 'btn-start';
        startBtn.addEventListener('click', () => { stage = 'quiz'; render(); });
        app.appendChild(startBtn);

        const table = document.createElement('table');
        const thead = document.createElement('thead');
        thead.innerHTML = '<tr><th>ÌïúÍµ≠Ïñ¥</th><th>English</th></tr>';
        table.appendChild(thead);
        const tbody = document.createElement('tbody');
        vocabList.forEach(item => {
          const tr = document.createElement('tr');
          tr.innerHTML = `<td>${item.korean}</td><td>${item.english}</td>`;
          tbody.appendChild(tr);
        });
        table.appendChild(tbody);
        app.appendChild(table);
      }

      if (stage === 'quiz') {
        // Show vocab toggle button
        const showBtn = document.createElement('button');
        showBtn.textContent = 'View Vocabulary';
        showBtn.className = 'btn-show';
        showBtn.addEventListener('click', toggleVocabModal);
        app.appendChild(showBtn);

        const current = quizList[currentIndex];
        const qDiv = document.createElement('div');
        qDiv.innerHTML = `<strong>Q${currentIndex + 1}.</strong> ${current.korean}`;
        app.appendChild(qDiv);

        const input = document.createElement('input');
        input.type = 'text';
        input.id = 'answer';
        app.appendChild(input);
        input.focus();

        const btn = document.createElement('button');
        btn.textContent = 'Submit';
        btn.className = 'btn-submit';
        btn.addEventListener('click', submitAnswer);
        app.appendChild(btn);

        input.addEventListener('keydown', e => {
          if (e.key === 'Enter') { e.preventDefault(); submitAnswer(); }
        });
      }

      if (stage === 'results') {
        const retryBtn = document.createElement('button');
        retryBtn.textContent = 'Retry Wrong Words';
        retryBtn.className = 'btn-retry';
        retryBtn.addEventListener('click', retryWrong);
        app.appendChild(retryBtn);

        const restartBtn = document.createElement('button');
        restartBtn.textContent = 'Restart Full Quiz';
        restartBtn.className = 'btn-restart';
        restartBtn.addEventListener('click', restartQuiz);
        app.appendChild(restartBtn);

        const h2 = document.createElement('h2');
        h2.textContent = 'Quiz Finished!';
        app.appendChild(h2);

        if (wrongCount > 0) {
          const p = document.createElement('p');
          p.textContent = `You got ${wrongCount} wrong:`;
          app.appendChild(p);

          const table = document.createElement('table');
          const thead = document.createElement('thead');
          thead.innerHTML = '<tr><th>ÌïúÍµ≠Ïñ¥</th><th>English</th></tr>';
          table.appendChild(thead);
          const tbody = document.createElement('tbody');
          history.filter(item => !item.isCorrect).forEach(item => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${item.korean}</td><td>${item.english}</td>`;
            tbody.appendChild(tr);
          });
          table.appendChild(tbody);
          app.appendChild(table);
        } else {
          const p = document.createElement('p');
          p.textContent = 'Perfect score! üéâ';
          app.appendChild(p);
        }
      }
    }

    function submitAnswer() {
      const current = quizList[currentIndex];
      const answer = document.getElementById('answer').value.trim().toLowerCase();
      const correct = current.english.trim().toLowerCase();
      const isCorrect = (answer === correct);
      history.push({ korean: current.korean, english: current.english, isCorrect });
      isCorrect ? correctCount++ : wrongCount++;
      document.getElementById('answer').value = '';
      if (currentIndex + 1 < quizList.length) {
        currentIndex++; render();
      } else {
        stage = 'results'; render();
      }
    }

    function retryWrong() {
      quizList = history.filter(item => !item.isCorrect).map(item => ({ korean: item.korean, english: item.english }));
      resetQuiz(); stage = 'quiz'; render();
    }

    function restartQuiz() {
      quizList = [...vocabList]; resetQuiz(); stage = 'quiz'; render();
    }

    function resetQuiz() {
      history = []; correctCount = 0; wrongCount = 0; currentIndex = 0;
    }

    // Vocab modal functions
    function toggleVocabModal() {
      const modal = document.getElementById('vocabModal');
      modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
    }
    document.getElementById('modalClose').addEventListener('click', toggleVocabModal);

    // Populate vocab modal on load
    document.addEventListener('DOMContentLoaded', () => {
      const tbody = document.querySelector('#vocabModal tbody');
      vocabList.forEach(item => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${item.korean}</td><td>${item.english}</td>`;
        tbody.appendChild(tr);
      });
      render();
    });
  </script>
</body>
</html>
